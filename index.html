<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Wishlist Planner</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>‚ú® Smart Wishlist Planner</h1>
            <p class="subtitle">Plan your purchases intelligently</p>
            <div id="authSection" style="margin-top: 16px;">
                <div id="loginForm" class="auth-form" style="display: none; max-width: 400px; margin: 0 auto; padding: 16px; background: var(--surface); border-radius: 8px; border: 1px solid var(--border);">
                    <h3 style="margin-bottom: 12px; text-align: center;">Login / Sign Up</h3>
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 12px; text-align: center;">Sign up to sync your data across all devices</p>
                    <input type="email" id="loginEmail" placeholder="Email" style="padding: 8px; margin: 4px 0; border-radius: 6px; border: 1px solid var(--border); width: 100%; box-sizing: border-box;">
                    <input type="password" id="loginPassword" placeholder="Password" style="padding: 8px; margin: 4px 0; border-radius: 6px; border: 1px solid var(--border); width: 100%; box-sizing: border-box;">
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <button id="loginBtn" class="btn btn-primary" style="padding: 8px 16px; margin: 0; flex: 1;">Login</button>
                        <button id="signupBtn" class="btn btn-secondary" style="padding: 8px 16px; margin: 0; flex: 1;">Sign Up</button>
                    </div>
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <button id="cancelAuthBtn" class="btn btn-secondary" style="padding: 8px 16px; margin: 0; flex: 1;">Cancel</button>
                        <button id="continueAnonymousBtn" class="btn btn-secondary" style="padding: 8px 16px; margin: 0; flex: 1;">Continue as Guest</button>
                    </div>
                </div>
                <div id="authStatus" style="text-align: center;">
                    <div style="margin-bottom: 8px;">
                        <span id="userEmail" style="color: var(--text-secondary); font-size: 0.9rem; display: block; margin-bottom: 4px;"></span>
                    </div>
                    <button id="showLoginBtn" class="btn btn-secondary" style="padding: 6px 12px; margin: 4px; font-size: 0.85rem;">Login/Sign Up</button>
                    <button id="logoutBtn" class="btn btn-secondary" style="padding: 6px 12px; margin: 4px; font-size: 0.85rem; display: none;">Logout</button>
                </div>
            </div>
        </header>

        <!-- Financial Profile Section -->
        <section class="financial-profile card">
            <h2>üí∞ Financial Profile</h2>
            <div class="profile-form">
                <div class="form-group">
                    <label>Income Type:</label>
                    <select id="incomeType">
                        <option value="hourly">Hourly</option>
                        <option value="monthly">Monthly</option>
                        <option value="yearly">Yearly</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Income Amount:</label>
                    <input type="number" id="incomeAmount" placeholder="e.g., 25" step="0.01">
                </div>
                <div class="form-group">
                    <label>Monthly Expenses:</label>
                    <input type="number" id="monthlyExpenses" placeholder="e.g., 1500" step="0.01">
                </div>
                <div class="form-group">
                    <label>Days per Month Worked:</label>
                    <input type="number" id="daysPerMonth" placeholder="e.g., 20" min="1" max="31" step="1">
                    <small style="color: var(--text-secondary); font-size: 0.85rem;">Number of days you work per month (default: 20)</small>
                </div>
                <button id="saveProfile" class="btn btn-primary">Save Profile</button>
            </div>
            <div id="profileSummary" class="profile-summary hidden"></div>
        </section>

        <!-- Goals Section -->
        <section class="goals-section card">
            <div class="section-header">
                <h2>üéØ Goals</h2>
                <button id="addGoalBtn" class="btn btn-secondary">+ New Goal</button>
            </div>
            <div id="goalsList" class="goals-list"></div>
        </section>

        <!-- Lists Section -->
        <section class="lists-section card">
            <div class="section-header">
                <h2>üìã Lists</h2>
            </div>
            <div id="listsList" class="lists-list"></div>
        </section>

        <!-- Budgets Section -->
        <section class="budgets-section card">
            <div class="section-header">
                <h2>üí∞ List Budgets</h2>
            </div>
            <div id="budgetsList" class="budgets-list"></div>
        </section>

        <!-- Add Item Section -->
        <section class="add-item-section card">
            <h2>‚ûï Add Item</h2>
            <div class="tabs">
                <button class="tab-btn active" data-tab="link">Add by Link</button>
                <button class="tab-btn" data-tab="manual">Manual Entry</button>
            </div>
            
            <div id="linkTab" class="tab-content active">
                <div class="form-group">
                    <label>Product URL:</label>
                    <input type="url" id="productUrl" placeholder="https://example.com/product">
                </div>
                <button id="scrapeItemBtn" class="btn btn-primary">‚ú® Scrape with AI</button>
                <div id="scrapingStatus" class="status-message"></div>
            </div>

            <div id="manualTab" class="tab-content">
                <div class="form-group">
                    <label>Item Title:</label>
                    <input type="text" id="itemTitle" placeholder="Product name">
                </div>
                <div class="form-group">
                    <label>Price ($):</label>
                    <input type="number" id="itemPrice" placeholder="0.00" step="0.01">
                </div>
                <div class="form-group">
                    <label>Image URL:</label>
                    <input type="url" id="itemImageUrl" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Specifications (one per line):</label>
                    <textarea id="itemSpecs" rows="4" placeholder="Spec 1&#10;Spec 2&#10;Spec 3"></textarea>
                </div>
                <button id="addManualItemBtn" class="btn btn-primary">Add Item</button>
            </div>

            <!-- Item Details Form (shown after scraping or for editing) -->
            <div id="itemDetailsForm" class="item-details-form hidden">
                <h3>Item Details</h3>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="detailTitle">
                </div>
                <div class="form-group">
                    <label>Price (‚Ç¨):</label>
                    <input type="number" id="detailPrice" step="0.01">
                </div>
                <div class="form-group">
                    <label>Image URL:</label>
                    <input type="url" id="detailImageUrl" oninput="updateImagePreview(this.value)">
                    <div id="imagePreview" style="margin-top: 10px; display: none;">
                        <img id="previewImage" src="" alt="Preview" style="max-width: 300px; max-height: 300px; border-radius: 8px; border: 1px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>Purchase Link (URL):</label>
                    <input type="url" id="detailPurchaseLink" placeholder="https://example.com/product">
                </div>
                <div class="form-group">
                    <label>Specifications (one per line):</label>
                    <textarea id="detailSpecs" rows="6"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Category:</label>
                        <input type="text" id="detailCategory" placeholder="e.g., Tech, Home">
                    </div>
                    <div class="form-group">
                        <label>Priority:</label>
                        <select id="detailPriority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Tags (comma-separated):</label>
                    <input type="text" id="detailTags" placeholder="tag1, tag2, tag3">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Goal:</label>
                        <select id="detailGoal">
                            <option value="">No Goal</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>List:</label>
                        <input type="text" id="detailList" list="listOptions" placeholder="Type or select a list name">
                        <datalist id="listOptions">
                            <option value="Grocery">
                            <option value="Christmas List">
                            <option value="Temu List">
                        </datalist>
                    </div>
                </div>
                <div class="form-actions">
                    <button id="saveItemBtn" class="btn btn-primary">Save Item</button>
                    <button id="cancelItemBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </section>

        <!-- Filters and Sorting -->
        <section class="filters-section card">
            <div class="form-group" style="margin-bottom: 16px;">
                <label>Search Items:</label>
                <input type="text" id="searchItems" placeholder="Search by title, category, or tags..." style="width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border);">
            </div>
            <div class="filters-row">
                <div class="form-group">
                    <label>Sort by:</label>
                    <select id="sortBy">
                        <option value="date">Date Added</option>
                        <option value="price-desc">Price (High-Low)</option>
                        <option value="price-asc">Price (Low-High)</option>
                        <option value="name">Name (A-Z)</option>
                        <option value="priority">Priority</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Filter by Category:</label>
                    <select id="filterCategory">
                        <option value="">All Categories</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Filter by Goal:</label>
                    <select id="filterGoal">
                        <option value="">All Goals</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Filter by Priority:</label>
                    <select id="filterPriority">
                        <option value="">All Priorities</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Filter by List:</label>
                    <input type="text" id="filterList" list="filterListOptions" placeholder="All Lists">
                    <datalist id="filterListOptions">
                        <option value="Grocery">
                        <option value="Christmas List">
                        <option value="Temu List">
                    </datalist>
                </div>
            </div>
        </section>

        <!-- Wishlist Display -->
        <section class="wishlist-section">
            <div class="section-header">
                <h2>üìã Wishlist</h2>
                <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-size: 0.9rem; margin-bottom: 4px;">View List:</label>
                        <input type="text" id="viewList" list="viewListOptions" placeholder="All Lists" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--surface); width: 200px;">
                        <datalist id="viewListOptions">
                            <option value="Grocery">
                            <option value="Christmas List">
                            <option value="Temu List">
                        </datalist>
                    </div>
                    <button id="checkPricesBtn" class="btn btn-secondary" style="padding: 8px 16px; font-size: 0.9rem;" title="Check prices for items with purchase links">
                        üîç Check Prices Now
                    </button>
                    <div id="wishlistStats" class="wishlist-stats"></div>
                </div>
            </div>
            <div id="priceCheckStatus" class="status-message" style="display: none; margin-bottom: 16px;"></div>
            <div id="wishlistItems" class="wishlist-grid"></div>
        </section>

        <!-- What-If Calculator -->
        <section class="whatif-section card">
            <h2>üîÆ What-If Scenarios</h2>
            <div class="whatif-form">
                <div class="form-group">
                    <label>Reduce monthly expenses by ($):</label>
                    <input type="number" id="reduceExpenses" placeholder="0" step="0.01">
                </div>
                <div class="form-group">
                    <label>Increase income by ($/hour or $/month or $/year):</label>
                    <input type="number" id="increaseIncome" placeholder="0" step="0.01">
                </div>
                <button id="calculateWhatIf" class="btn btn-primary">Calculate Impact</button>
            </div>
            <div id="whatifResults" class="whatif-results hidden"></div>
        </section>

        <!-- Savings Planner -->
        <section class="savings-planner card">
            <h2>üíæ Savings Planner</h2>
            <div class="planner-form">
                <div class="form-group">
                    <label>Savings Amount:</label>
                    <input type="number" id="savingsAmount" placeholder="0" step="0.01">
                </div>
                <div class="form-group">
                    <label>Savings Frequency:</label>
                    <select id="savingsFrequency">
                        <option value="weekly">Weekly</option>
                        <option value="monthly" selected>Monthly</option>
                    </select>
                </div>
                <button id="calculateSavings" class="btn btn-primary">Calculate Timeline</button>
            </div>
            <div id="savingsResults" class="savings-results hidden"></div>
        </section>
    </div>

    <!-- Item Hover Card (Modal) -->
    <div id="itemModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div id="goalModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Create New Goal</h2>
            <div class="form-group">
                <label>Goal Name:</label>
                <input type="text" id="goalName" placeholder="e.g., New PC Build">
            </div>
            <div class="form-group">
                <label>Description (optional):</label>
                <textarea id="goalDescription" rows="3" placeholder="Describe your goal..."></textarea>
            </div>
            <button id="saveGoalBtn" class="btn btn-primary">Create Goal</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

